<link href="/assets/plugins/tagsinput/jquery.tagsinput.css" rel="stylesheet">
 
<link href="/assets/plugins/toggles/toggles.css" rel="stylesheet">
 
	
<link href="/assets/plugins/dropzone/4.3.0/min/dropzone.min.css"
	rel="stylesheet">
<link href="/assets/admin/css/artilce-edit.css" rel="stylesheet">

<!-- 标签插件 -->
<script type="text/javascript" src="/assets/plugins/tagsinput/jquery.tagsinput.min.js"></script>
<link href="/assets/plugins/tagsinput/jquery.tagsinput.css"  rel="stylesheet">

<!-- 多选插件 -->
<script type="text/javascript" src="/assets/plugins/select2/3.4.8/select2.min.js"></script>
<link href="/assets/plugins/select2/3.4.8/select2.min.css"  rel="stylesheet">
<link href="/assets/plugins/select2/3.4.8/select2-bootstrap.min.css"  rel="stylesheet">
<!-- 预览图上传插件 -->
<link href="/assets/plugins/dropzone/4.3.0/min/dropzone.min.css"  rel="stylesheet">
<script type="text/javascript" src="/assets/plugins/dropzone/4.3.0/min/dropzone.min.js"></script>

<link href="/assets/plugins/editor/css/editormd.css"  rel="stylesheet">


<script type="text/javascript" src="/assets/plugins/editor/editormd.js"></script>


<script type="text/javascript">
function tagInit(){
	#for(atag:aTags)
		$('#tags').addTag("#(atag.mname)");
	#end
}

$(document).ready(function() {
	#if(article!=null&&article.thumbImg!=null)
		var thumbImg="#(article.thumbImg)";
		$("#dropzone").css({"background-image":"url('"+thumbImg+"')","background-size":"cover"})
		$('.dz-image').hide();
		$(".dz-message").hide();
	#end
})
 
</script>
<script type="text/javascript">
$(function(){

})
</script>
<script type="text/html" id="content">#(article.content ?? '')</script>
<style>
.article-edit .layui-input-block{
    margin-left:24px;
}
.article-edit .select2-container-multi .select2-choices{
    height: 34px!important;
    border: 1px solid #D2D2D2!important;
    background-image: none;
}
.article-edit .select2{
	padding-top: 1px;
}

.article-edit .select2-container-multi .select2-choices .select2-search-choice {
    margin: 6px 0 3px 5px!important;
}

.article-edit #[[#]]#switch-btn{
	float: right;
}
</style>
 
<div class="article-edit layui-form" >
 
	<div class="layui-row">
		<div class="layui-col-lg12 layui-col-md12">
			<blockquote class="page-title">#(article==null?"发表文章":"修改文章")</blockquote>
		</div>
	</div>
	<div class="layui-row" >
		<div class="layui-col-md6">
			<div class="layui-form-item">
			  <div class="layui-input-block">
			  	<input type="hidden" name="isTop" value="#(article.isTop??false)">
			  	<input type="hidden" name="allowComment" value="#(article.allowComment??true)">
			  	<input type="hidden" name="isOriginal" value="#(article.isOriginal??true)">
			  	<input type="hidden" name="contentType" value="#(article.contentType??'html')" id="contentType" >
		      	<input type="text" name="title" required  value="#(article.title??)"  lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
		        <input type="hidden" name="id" value="#(article.id??)">
		         <input type="hidden" name="thumbImg" value="#(article.thumbImg??)">
		       </div> 
		    </div>
		</div>
		<div class="layui-col-md6">
			<div class="layui-form-item">
			  <div class="layui-input-block">
		      	<input type="text" name="identify" required  value="#(article.identify??)"  lay-verify="required" placeholder="请输入访问路径" autocomplete="off" class="layui-input">
		      </div> 
	      	</div>
		</div>
	</div>
	<div class="layui-row">
		<div class="layui-col-md6">
		 	<div class="layui-form-item">
			  <div class="layui-input-block">
		      	<input type="text" name="tags" id="tags" required  lay-verify="required" placeholder="请输入标签" autocomplete="off" class="layui-input">
		      </div> 
	      	</div>
		</div>
		<div class="layui-col-md6">
		 	<div class="layui-form-item">
		 	 	<div class="layui-input-block">
		 	 		<select multiple="multiple" class="select2 " lay-ignore id="multiple-sel">
		 	 			#for(category:allCategory)
		 	 				<option value="#(category.id)"
		 	 				 #for(aCategory:aCategorys)
		 	 					#if(aCategory.id==category.id)
		 	 						selected
		 	 					#end
		 	 					#(aCategory.id)
		 	 				#end>#(category.mname)</option>
		 	 			#end
		 	 		</select>
		 	   </div> 
		 	</div> 
		</div>
	</div>
		<div class="layui-row">
		<div class="layui-col-md6">
		 	<div class="layui-form-item">
 		 	</div>
		</div>
		<div class="layui-col-md6">
		 	<div class="layui-form-item">
                 <button class="layui-btn layui-btn-primary layui-btn-sm switch-editor" data-editor="editormd" >Markdown编辑器</button>
                <button class="layui-btn layui-btn-primary layui-btn-sm switch-editor" data-editor="ueditor" >富文本编辑器</button>
		 		
		 	</div>
		</div>
	</div>
	<div class="layui-row">
		<div class="layui-col-md12 "  id="html-container">
			<div class="layui-form-item">
				<div class="layui-input-block">
				 	<script id="article-ueditor" name="content" type="text/plain">
        				
    				</script>
	    		</div>
    		</div>
		</div>
		<div class="layui-col-md12  " id="md-container">
			<div class="layui-form-item">
				<div class="layui-input-block">
				 	<div id="meditor">
				 	</div>
	    		</div>
    		</div>
		</div>
		<div class="layui-col-md12" >
			<div class="layui-form-item">
				<div class="layui-input-block">
				 <div class="layui-inline">
				    <label class="layui-form-label">置顶</label>
				    <div class="layui-input-inline" style="width: 100px;">
					<input type="checkbox" lay-filter="isTop"    #((article==null||!article.isTop)?'':'checked') lay-skin="switch" lay-text="开启|关闭">				    </div>
				  </div>
				  <div class="layui-inline">
				    <label class="layui-form-label">原创</label>
				    <div class="layui-input-inline" style="width: 100px;">
					<input type="checkbox" lay-filter="isOriginal"    #((article==null||!article.isOriginal)?'':'checked')  lay-skin="switch" lay-text="开启|关闭">				    </div>
				  </div>
				   <div class="layui-inline">
				    <label class="layui-form-label">允许评论</label>
				    <div class="layui-input-inline" style="width: 100px;">
					<input type="checkbox" lay-filter="allowComment"     #((article==null||!article.allowComment)?'':'checked') lay-skin="switch" lay-text="开启|关闭">				    </div>
				   </div>
				  	<div class="layui-inline" style="float:right;">
				  		<button class="layui-btn layui-btn-normal" lay-submit lay-filter="publish">发布</button>
				  		<button class="layui-btn layui-btn-warm"   lay-filter="draft" >存为草稿</button>
				  	</div>
				</div>
			</div>
		</div>
			<div class="layui-col-md12">
			<div class="layui-form-item">
				<div id="dropzone-container"  class="form-group">
					<div class="dropzone dropzone-previews" id="dropzone"  >
						<div class="dz-message">
							<p>可以为你的文章添加一张缩略图 ;)</p>
						</div>
					</div>
					<img id="dropzone-thumbImg"  class="hide">
				</div>
			</div>
		</div>
	</div>
	
</div>

<script src="/assets/plugins/turndown/turndown.js"></script>

<script>
    function requireLoad(){
      layui.use(['articleEdit'],function(articleEdit){
        articleEdit.pjaxLoad();
     })
    }
</script>